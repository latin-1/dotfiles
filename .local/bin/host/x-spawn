#!/bin/bash
set -eo pipefail

runner=(toolbox run)
runner+=("$SHELL" -c 'exec "$@"' --)
runner+=(env GHOSTTY_RESOURCES_DIR="$GHOSTTY_RESOURCES_DIR")

program="$(basename "$0")"
if [[ $program == x-spawn ]]; then
  if [[ $# == 0 ]]; then
    "${runner[@]}" "$SHELL"
  else
    "${runner[@]}" "$@"
  fi
else
  "${runner[@]}" "$program" "$@"
fi
